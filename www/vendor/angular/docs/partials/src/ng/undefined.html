

<div>
  <a ng-click="openPlunkr('examples/example-example58')" class="btn pull-right">
    <i class="glyphicon glyphicon-edit">&nbsp;</i>
    Edit in Plunker</a>
  <div class="runnable-example"
      path="examples/example-example58">

   
    <div class="runnable-example-file" 
      name="index.html"
      language="html"
      type="html">
      <pre><code>&lt;div ng-controller=&quot;FetchCtrl&quot;&gt;&#10;&lt;select ng-model=&quot;method&quot;&gt;&#10;  &lt;option&gt;GET&lt;/option&gt;&#10;  &lt;option&gt;JSONP&lt;/option&gt;&#10;&lt;/select&gt;&#10;&lt;input type=&quot;text&quot; ng-model=&quot;url&quot; size=&quot;80&quot;/&gt;&#10;&lt;button id=&quot;fetchbtn&quot; ng-click=&quot;fetch()&quot;&gt;fetch&lt;/button&gt;&lt;br&gt;&#10;&lt;button id=&quot;samplegetbtn&quot; ng-click=&quot;updateModel(&#39;GET&#39;, &#39;http-hello.html&#39;)&quot;&gt;Sample GET&lt;/button&gt;&#10;&lt;button id=&quot;samplejsonpbtn&quot;&#10;  ng-click=&quot;updateModel(&#39;JSONP&#39;,&#10;                &#39;https://angularjs.org/greet.php?callback=JSON_CALLBACK&amp;name=Super%20Hero&#39;)&quot;&gt;&#10;  Sample JSONP&#10;&lt;/button&gt;&#10;&lt;button id=&quot;invalidjsonpbtn&quot;&#10;  ng-click=&quot;updateModel(&#39;JSONP&#39;, &#39;https://angularjs.org/doesntexist&amp;callback=JSON_CALLBACK&#39;)&quot;&gt;&#10;    Invalid JSONP&#10;  &lt;/button&gt;&#10;&lt;pre&gt;http status code: {{status}}&lt;/pre&gt;&#10;&lt;pre&gt;http response data: {{data}}&lt;/pre&gt;&#10;&lt;/div&gt;</code></pre>
    </div>
  
    <div class="runnable-example-file" 
      name="script.js"
      language="js"
      type="js">
      <pre><code>function FetchCtrl($scope, $http, $templateCache) {&#10;$scope.method = &#39;GET&#39;;&#10;$scope.url = &#39;http-hello.html&#39;;&#10;&#10;$scope.fetch = function() {&#10;  $scope.code = null;&#10;  $scope.response = null;&#10;&#10;  $http({method: $scope.method, url: $scope.url, cache: $templateCache}).&#10;    success(function(data, status) {&#10;      $scope.status = status;&#10;      $scope.data = data;&#10;    }).&#10;    error(function(data, status) {&#10;      $scope.data = data || &quot;Request failed&quot;;&#10;      $scope.status = status;&#10;  });&#10;};&#10;&#10;$scope.updateModel = function(method, url) {&#10;  $scope.method = method;&#10;  $scope.url = url;&#10;};&#10;}</code></pre>
    </div>
  
    <div class="runnable-example-file" 
      name="http-hello.html"
      language="html"
      type="html">
      <pre><code>Hello, $http!</code></pre>
    </div>
  
    <div class="runnable-example-file" 
      name="protractor.js"
      type="protractor"
      language="js">
      <pre><code>var status = element(by.binding(&#39;status&#39;));&#10;var data = element(by.binding(&#39;data&#39;));&#10;var fetchBtn = element(by.id(&#39;fetchbtn&#39;));&#10;var sampleGetBtn = element(by.id(&#39;samplegetbtn&#39;));&#10;var sampleJsonpBtn = element(by.id(&#39;samplejsonpbtn&#39;));&#10;var invalidJsonpBtn = element(by.id(&#39;invalidjsonpbtn&#39;));&#10;&#10;it(&#39;should make an xhr GET request&#39;, function() {&#10;  sampleGetBtn.click();&#10;  fetchBtn.click();&#10;  expect(status.getText()).toMatch(&#39;200&#39;);&#10;  expect(data.getText()).toMatch(/Hello, \$http!/);&#10;});&#10;&#10;it(&#39;should make a JSONP request to angularjs.org&#39;, function() {&#10;  sampleJsonpBtn.click();&#10;  fetchBtn.click();&#10;  expect(status.getText()).toMatch(&#39;200&#39;);&#10;  expect(data.getText()).toMatch(/Super Hero!/);&#10;});&#10;&#10;it(&#39;should make JSONP request to invalid URL and invoke the error handler&#39;,&#10;    function() {&#10;  invalidJsonpBtn.click();&#10;  fetchBtn.click();&#10;  expect(status.getText()).toMatch(&#39;0&#39;);&#10;  expect(data.getText()).toMatch(&#39;Request failed&#39;);&#10;});</code></pre>
    </div>
  

    <iframe class="runnable-example-frame" src="examples/example-example58/index.html" name="example-example58"></iframe>
  </div>
</div>

